(()=>{var fe=Object.create;var le=Object.defineProperty;var me=Object.getOwnPropertyDescriptor;var ge=Object.getOwnPropertyNames;var Ee=Object.getPrototypeOf,Ie=Object.prototype.hasOwnProperty;var Se=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var Ce=(i,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of ge(e))!Ie.call(i,r)&&r!==t&&le(i,r,{get:()=>e[r],enumerable:!(s=me(e,r))||s.enumerable});return i};var be=(i,e,t)=>(t=i!=null?fe(Ee(i)):{},Ce(e||!i||!i.__esModule?le(t,"default",{value:i,enumerable:!0}):t,i));var he=Se((so,ce)=>{"use strict";function de(i){return(de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(i)}(function(){var i=function(){for(var e,t,s=[],r=window,n=r;n;){try{if(n.frames.__tcfapiLocator){e=n;break}}catch{}if(n===r.top)break;n=n.parent}e||(function c(){var a=r.document,l=!!r.frames.__tcfapiLocator;if(!l)if(a.body){var d=a.createElement("iframe");d.style.cssText="display:none",d.name="__tcfapiLocator",a.body.appendChild(d)}else setTimeout(c,5);return!l}(),r.__tcfapi=function(){for(var c=arguments.length,a=new Array(c),l=0;l<c;l++)a[l]=arguments[l];if(!a.length)return s;a[0]==="setGdprApplies"?a.length>3&&parseInt(a[1],10)===2&&typeof a[3]=="boolean"&&(t=a[3],typeof a[2]=="function"&&a[2]("set",!0)):a[0]==="ping"?typeof a[2]=="function"&&a[2]({gdprApplies:t,cmpLoaded:!1,cmpStatus:"stub"}):s.push(a)},r.addEventListener("message",function(c){var a=typeof c.data=="string",l={};if(a)try{l=JSON.parse(c.data)}catch{}else l=c.data;var d=de(l)==="object"&&l!==null?l.__tcfapiCall:null;d&&window.__tcfapi(d.command,d.version,function(h,C){var m={__tcfapiReturn:{returnValue:h,success:C,callId:d.callId}};c&&c.source&&c.source.postMessage&&c.source.postMessage(a?JSON.stringify(m):m,"*")},d.parameter)},!1))};typeof ce<"u"?ce.exports=i:i()})()});var A;(function(i){i.PING="ping",i.GET_TC_DATA="getTCData",i.GET_IN_APP_TC_DATA="getInAppTCData",i.GET_VENDOR_LIST="getVendorList",i.ADD_EVENT_LISTENER="addEventListener",i.REMOVE_EVENT_LISTENER="removeEventListener"})(A||(A={}));var D;(function(i){i.STUB="stub",i.LOADING="loading",i.LOADED="loaded",i.ERROR="error"})(D||(D={}));var U;(function(i){i.VISIBLE="visible",i.HIDDEN="hidden",i.DISABLED="disabled"})(U||(U={}));var oe;(function(i){i.TC_LOADED="tcloaded",i.CMP_UI_SHOWN="cmpuishown",i.USER_ACTION_COMPLETE="useractioncomplete"})(oe||(oe={}));var w=class{listenerId;callback;next;param;success=!0;constructor(e,t,s,r){Object.assign(this,{callback:e,listenerId:s,param:t,next:r});try{this.respond()}catch{this.invokeCallback(null)}}invokeCallback(e){let t=e!==null;typeof this.next=="function"?this.callback(this.next,e,t):this.callback(e,t)}};var _=class extends w{respond(){this.throwIfParamInvalid(),this.invokeCallback(new G(this.param,this.listenerId))}throwIfParamInvalid(){if(this.param!==void 0&&(!Array.isArray(this.param)||!this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")}};var J=class{eventQueue=new Map;queueNumber=0;add(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++}remove(e){return this.eventQueue.delete(e)}exec(){this.eventQueue.forEach((e,t)=>{new _(e.callback,e.param,t,e.next)})}clear(){this.queueNumber=0,this.eventQueue.clear()}get size(){return this.eventQueue.size}};var f=class{static apiVersion="2";static tcfPolicyVersion;static eventQueue=new J;static cmpStatus=D.LOADING;static disabled=!1;static displayStatus=U.HIDDEN;static cmpId;static cmpVersion;static eventStatus;static gdprApplies;static tcModel;static tcString;static reset(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=D.LOADING,this.disabled=!1,this.displayStatus=U.HIDDEN,this.eventQueue.clear()}};var F=class{cmpId=f.cmpId;cmpVersion=f.cmpVersion;gdprApplies=f.gdprApplies;tcfPolicyVersion=f.tcfPolicyVersion};var G=class extends F{tcString;listenerId;eventStatus;cmpStatus;isServiceSpecific;useNonStandardStacks;publisherCC;purposeOneTreatment;outOfBand;purpose;vendor;specialFeatureOptins;publisher;constructor(e,t){if(super(),this.eventStatus=f.eventStatus,this.cmpStatus=f.cmpStatus,this.listenerId=t,f.gdprApplies){let s=f.tcModel;this.tcString=f.tcString,this.isServiceSpecific=s.isServiceSpecific,this.useNonStandardStacks=s.useNonStandardStacks,this.purposeOneTreatment=s.purposeOneTreatment,this.publisherCC=s.publisherCountryCode,this.outOfBand={allowedVendors:this.createVectorField(s.vendorsAllowed,e),disclosedVendors:this.createVectorField(s.vendorsDisclosed,e)},this.purpose={consents:this.createVectorField(s.purposeConsents),legitimateInterests:this.createVectorField(s.purposeLegitimateInterests)},this.vendor={consents:this.createVectorField(s.vendorConsents,e),legitimateInterests:this.createVectorField(s.vendorLegitimateInterests,e)},this.specialFeatureOptins=this.createVectorField(s.specialFeatureOptins),this.publisher={consents:this.createVectorField(s.publisherConsents),legitimateInterests:this.createVectorField(s.publisherLegitimateInterests),customPurpose:{consents:this.createVectorField(s.publisherCustomConsents),legitimateInterests:this.createVectorField(s.publisherCustomLegitimateInterests)},restrictions:this.createRestrictions(s.publisherRestrictions)}}}createRestrictions(e){let t={};if(e.numRestrictions>0){let s=e.getMaxVendorId();for(let r=1;r<=s;r++){let n=r.toString();e.getRestrictions(r).forEach(c=>{let a=c.purposeId.toString();t[a]||(t[a]={}),t[a][n]=c.restrictionType})}}return t}createVectorField(e,t){return t?t.reduce((s,r)=>(s[String(r)]=e.has(Number(r)),s),{}):[...e].reduce((s,r)=>(s[r[0].toString(10)]=r[1],s),{})}};var q=class extends G{constructor(e){super(e),delete this.outOfBand}createVectorField(e){return[...e].reduce((t,s)=>(t+=s[1]?"1":"0",t),"")}createRestrictions(e){let t={};if(e.numRestrictions>0){let s=e.getMaxVendorId();e.getRestrictions().forEach(r=>{t[r.purposeId.toString()]="_".repeat(s)});for(let r=0;r<s;r++){let n=r+1;e.getRestrictions(n).forEach(c=>{let a=c.restrictionType.toString(),l=c.purposeId.toString(),d=t[l].substr(0,r),h=t[l].substr(r+1);t[l]=d+a+h})}}return t}};var z=class extends F{cmpLoaded=!0;cmpStatus=f.cmpStatus;displayStatus=f.displayStatus;apiVersion=String(f.apiVersion);gvlVersion;constructor(){super(),f.tcModel&&f.tcModel.vendorListVersion&&(this.gvlVersion=+f.tcModel.vendorListVersion)}};var Y=class extends w{respond(){this.invokeCallback(new z)}};var K=class extends _{respond(){this.throwIfParamInvalid(),this.invokeCallback(new q(this.param))}};var E=class extends Error{constructor(e){super(e),this.name="DecodingError"}};var L=class extends Error{constructor(e){super(e),this.name="EncodingError"}};var O=class extends Error{constructor(e){super(e),this.name="GVLError"}};var b=class extends Error{constructor(e,t,s=""){super(`invalid value ${t} passed for ${e} ${s}`),this.name="TCModelError"}};var M=class{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);static BASIS=6;static LCM=24;static encode(e){if(!/^[0-1]+$/.test(e))throw new L("Invalid bitField");let t=e.length%this.LCM;e+=t?"0".repeat(this.LCM-t):"";let s="";for(let r=0;r<e.length;r+=this.BASIS)s+=this.DICT[parseInt(e.substr(r,this.BASIS),2)];return s}static decode(e){if(!/^[A-Za-z0-9\-_]+$/.test(e))throw new E("Invalidly encoded Base64URL string");let t="";for(let s=0;s<e.length;s++){let r=this.REVERSE_DICT.get(e[s]).toString(2);t+="0".repeat(this.BASIS-r.length)+r}return t}};var v=class{clone(){let e=new this.constructor;return Object.keys(this).forEach(s=>{let r=this.deepClone(this[s]);r!==void 0&&(e[s]=r)}),e}deepClone(e){let t=typeof e;if(t==="number"||t==="string"||t==="boolean")return e;if(e!==null&&t==="object"){if(typeof e.clone=="function")return e.clone();if(e instanceof Date)return new Date(e.getTime());if(e[Symbol.iterator]!==void 0){let s=[];for(let r of e)s.push(this.deepClone(r));return e instanceof Array?s:new e.constructor(s)}else{let s={};for(let r in e)e.hasOwnProperty(r)&&(s[r]=this.deepClone(e[r]));return s}}}};var k=class i extends v{root=null;getRoot(){return this.root}isEmpty(){return!this.root}add(e){let t={value:e,left:null,right:null},s;if(this.isEmpty())this.root=t;else for(s=this.root;;)if(e<s.value)if(s.left===null){s.left=t;break}else s=s.left;else if(e>s.value)if(s.right===null){s.right=t;break}else s=s.right;else break}get(){let e=[],t=this.root;for(;t;)if(!t.left)e.push(t.value),t=t.right;else{let s=t.left;for(;s.right&&s.right!=t;)s=s.right;s.right==t?(s.right=null,e.push(t.value),t=t.right):(s.right=t,t=t.left)}return e}contains(e){let t=!1,s=this.root;for(;s;)if(s.value===e){t=!0;break}else e>s.value?s=s.right:e<s.value&&(s=s.left);return t}min(e=this.root){let t;for(;e;)e.left?e=e.left:(t=e.value,e=null);return t}max(e=this.root){let t;for(;e;)e.right?e=e.right:(t=e.value,e=null);return t}remove(e,t=this.root){let s=null,r="left";for(;t;)if(e<t.value)s=t,t=t.left,r="left";else if(e>t.value)s=t,t=t.right,r="right";else{if(!t.left&&!t.right)s?s[r]=null:this.root=null;else if(!t.left)s?s[r]=t.right:this.root=t.right;else if(!t.right)s?s[r]=t.left:this.root=t.left;else{let n=this.min(t.right);this.remove(n,t.right),t.value=n}t=null}}static build(e){if(!e||e.length===0)return null;if(e.length===1){let t=new i;return t.add(e[0]),t}else{let t=e.length>>1,s=new i;s.add(e[t]);let r=s.getRoot();if(r){if(t+1<e.length){let n=i.build(e.slice(t+1));r.right=n?n.getRoot():null}if(t-1>0){let n=i.build(e.slice(0,t-1));r.left=n?n.getRoot():null}}return s}}};var j=class i{static langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]);has(e){return i.langSet.has(e)}forEach(e){i.langSet.forEach(e)}get size(){return i.langSet.size}};var o=class{static cmpId="cmpId";static cmpVersion="cmpVersion";static consentLanguage="consentLanguage";static consentScreen="consentScreen";static created="created";static supportOOB="supportOOB";static isServiceSpecific="isServiceSpecific";static lastUpdated="lastUpdated";static numCustomPurposes="numCustomPurposes";static policyVersion="policyVersion";static publisherCountryCode="publisherCountryCode";static publisherCustomConsents="publisherCustomConsents";static publisherCustomLegitimateInterests="publisherCustomLegitimateInterests";static publisherLegitimateInterests="publisherLegitimateInterests";static publisherConsents="publisherConsents";static publisherRestrictions="publisherRestrictions";static purposeConsents="purposeConsents";static purposeLegitimateInterests="purposeLegitimateInterests";static purposeOneTreatment="purposeOneTreatment";static specialFeatureOptins="specialFeatureOptins";static useNonStandardStacks="useNonStandardStacks";static vendorConsents="vendorConsents";static vendorLegitimateInterests="vendorLegitimateInterests";static vendorListVersion="vendorListVersion";static vendorsAllowed="vendorsAllowed";static vendorsDisclosed="vendorsDisclosed";static version="version"};var y;(function(i){i[i.NOT_ALLOWED=0]="NOT_ALLOWED",i[i.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",i[i.REQUIRE_LI=2]="REQUIRE_LI"})(y||(y={}));var T=class i extends v{static hashSeparator="-";purposeId_;restrictionType;constructor(e,t){super(),e!==void 0&&(this.purposeId=e),t!==void 0&&(this.restrictionType=t)}static unHash(e){let t=e.split(this.hashSeparator),s=new i;if(t.length!==2)throw new b("hash",e);return s.purposeId=parseInt(t[0],10),s.restrictionType=parseInt(t[1],10),s}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${i.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(e){this.purposeId_=e}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===y.NOT_ALLOWED||this.restrictionType===y.REQUIRE_CONSENT||this.restrictionType===y.REQUIRE_LI)}isSameAs(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType}};var H=class extends v{bitLength=0;map=new Map;gvl_;has(e){return this.map.has(e)}isOkToHave(e,t,s){let r=!0;if(this.gvl?.vendors){let n=this.gvl.vendors[s];if(n)if(e===y.NOT_ALLOWED)r=n.legIntPurposes.includes(t)||n.purposes.includes(t);else if(n.flexiblePurposes.length)switch(e){case y.REQUIRE_CONSENT:r=n.flexiblePurposes.includes(t)&&n.legIntPurposes.includes(t);break;case y.REQUIRE_LI:r=n.flexiblePurposes.includes(t)&&n.purposes.includes(t);break}else r=!1;else r=!1}return r}add(e,t){if(this.isOkToHave(t.restrictionType,t.purposeId,e)){let s=t.hash;this.has(s)||(this.map.set(s,new k),this.bitLength=0),this.map.get(s).add(e)}}restrictPurposeToLegalBasis(e){let t=this.gvl.vendorIds,s=e.hash,r=function(){let c;for(c of t);return c}(),n=[...Array(r).keys()].map(c=>c+1);for(let c=1;c<=r;c++)this.has(s)||(this.map.set(s,k.build(n)),this.bitLength=0),this.map.get(s).add(c)}getVendors(e){let t=[];if(e){let s=e.hash;this.has(s)&&(t=this.map.get(s).get())}else{let s=new Set;this.map.forEach(r=>{r.get().forEach(n=>{s.add(n)})}),t=Array.from(s)}return t}getRestrictionType(e,t){let s;return this.getRestrictions(e).forEach(r=>{r.purposeId===t&&(s===void 0||s>r.restrictionType)&&(s=r.restrictionType)}),s}vendorHasRestriction(e,t){let s=!1,r=this.getRestrictions(e);for(let n=0;n<r.length&&!s;n++)s=t.isSameAs(r[n]);return s}getMaxVendorId(){let e=0;return this.map.forEach(t=>{e=Math.max(t.max(),e)}),e}getRestrictions(e){let t=[];return this.map.forEach((s,r)=>{e?s.contains(e)&&t.push(T.unHash(r)):t.push(T.unHash(r))}),t}getPurposes(){let e=new Set;return this.map.forEach((t,s)=>{e.add(T.unHash(s).purposeId)}),Array.from(e)}remove(e,t){let s=t.hash,r=this.map.get(s);r&&(r.remove(e),r.isEmpty()&&(this.map.delete(s),this.bitLength=0))}set gvl(e){this.gvl_||(this.gvl_=e,this.map.forEach((t,s)=>{let r=T.unHash(s);t.get().forEach(c=>{this.isOkToHave(r.restrictionType,r.purposeId,c)||t.remove(c)})}))}get gvl(){return this.gvl_}isEmpty(){return this.map.size===0}get numRestrictions(){return this.map.size}};var ue;(function(i){i.COOKIE="cookie",i.WEB="web",i.APP="app"})(ue||(ue={}));var g;(function(i){i.CORE="core",i.VENDORS_DISCLOSED="vendorsDisclosed",i.VENDORS_ALLOWED="vendorsAllowed",i.PUBLISHER_TC="publisherTC"})(g||(g={}));var Q=class{static ID_TO_KEY=[g.CORE,g.VENDORS_DISCLOSED,g.VENDORS_ALLOWED,g.PUBLISHER_TC];static KEY_TO_ID={[g.CORE]:0,[g.VENDORS_DISCLOSED]:1,[g.VENDORS_ALLOWED]:2,[g.PUBLISHER_TC]:3}};var I=class extends v{bitLength=0;maxId_=0;set_=new Set;*[Symbol.iterator](){for(let e=1;e<=this.maxId;e++)yield[e,this.has(e)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(e){return this.set_.has(e)}unset(e){Array.isArray(e)?e.forEach(t=>this.unset(t)):typeof e=="object"?this.unset(Object.keys(e).map(t=>Number(t))):(this.set_.delete(Number(e)),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach(t=>{this.maxId_=Math.max(this.maxId,t)})))}isIntMap(e){let t=typeof e=="object";return t=t&&Object.keys(e).every(s=>{let r=Number.isInteger(parseInt(s,10));return r=r&&this.isValidNumber(e[s].id),r=r&&e[s].name!==void 0,r}),t}isValidNumber(e){return parseInt(e,10)>0}isSet(e){let t=!1;return e instanceof Set&&(t=Array.from(e).every(this.isValidNumber)),t}set(e){if(Array.isArray(e))e.forEach(t=>this.set(t));else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map(t=>Number(t)));else if(this.isValidNumber(e))this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0;else throw new b("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap")}empty(){this.set_=new Set}forEach(e){for(let t=1;t<=this.maxId;t++)e(this.has(t),t)}get size(){return this.set_.size}setAll(e){this.set(e)}};var p=class{static[o.cmpId]=12;static[o.cmpVersion]=12;static[o.consentLanguage]=12;static[o.consentScreen]=6;static[o.created]=36;static[o.isServiceSpecific]=1;static[o.lastUpdated]=36;static[o.policyVersion]=6;static[o.publisherCountryCode]=12;static[o.publisherLegitimateInterests]=24;static[o.publisherConsents]=24;static[o.purposeConsents]=24;static[o.purposeLegitimateInterests]=24;static[o.purposeOneTreatment]=1;static[o.specialFeatureOptins]=12;static[o.useNonStandardStacks]=1;static[o.vendorListVersion]=12;static[o.version]=6;static anyBoolean=1;static encodingType=1;static maxId=16;static numCustomPurposes=6;static numEntries=12;static numRestrictions=12;static purposeId=6;static restrictionType=2;static segmentType=3;static singleOrRange=1;static vendorId=16};var S=class{static encode(e){return String(Number(e))}static decode(e){return e==="1"}};var u=class{static encode(e,t){let s;if(typeof e=="string"&&(e=parseInt(e,10)),s=e.toString(2),s.length>t||e<0)throw new L(`${e} too large to encode into ${t}`);return s.length<t&&(s="0".repeat(t-s.length)+s),s}static decode(e,t){if(t!==e.length)throw new E("invalid bit length");return parseInt(e,2)}};var $=class{static encode(e,t){return u.encode(Math.round(e.getTime()/100),t)}static decode(e,t){if(t!==e.length)throw new E("invalid bit length");let s=new Date;return s.setTime(u.decode(e,t)*100),s}};var x=class{static encode(e,t){let s="";for(let r=1;r<=t;r++)s+=S.encode(e.has(r));return s}static decode(e,t){if(e.length!==t)throw new E("bitfield encoding length mismatch");let s=new I;for(let r=1;r<=t;r++)S.decode(e[r-1])&&s.set(r);return s.bitLength=e.length,s}};var W=class{static encode(e,t){e=e.toUpperCase();let s=65,r=e.charCodeAt(0)-s,n=e.charCodeAt(1)-s;if(r<0||r>25||n<0||n>25)throw new L(`invalid language code: ${e}`);if(t%2===1)throw new L(`numBits must be even, ${t} is not valid`);t=t/2;let c=u.encode(r,t),a=u.encode(n,t);return c+a}static decode(e,t){let s;if(t===e.length&&!(e.length%2)){let n=e.length/2,c=u.decode(e.slice(0,n),n)+65,a=u.decode(e.slice(n),n)+65;s=String.fromCharCode(c)+String.fromCharCode(a)}else throw new E("invalid bit length for language");return s}};var X=class{static encode(e){let t=u.encode(e.numRestrictions,p.numRestrictions);return e.isEmpty()||e.getRestrictions().forEach(s=>{t+=u.encode(s.purposeId,p.purposeId),t+=u.encode(s.restrictionType,p.restrictionType);let r=e.getVendors(s),n=r.length,c=0,a=0,l="";for(let d=0;d<n;d++){let h=r[d];a===0&&(c++,a=h);let C=r[n-1],m=e.gvl.vendorIds,P=V=>{for(;++V<=C&&!m.has(V););return V};if(d===n-1||r[d+1]>P(h)){let V=h!==a;l+=S.encode(V),l+=u.encode(a,p.vendorId),V&&(l+=u.encode(h,p.vendorId)),a=0}}t+=u.encode(c,p.numEntries),t+=l}),t}static decode(e){let t=0,s=new H,r=u.decode(e.substr(t,p.numRestrictions),p.numRestrictions);t+=p.numRestrictions;for(let n=0;n<r;n++){let c=u.decode(e.substr(t,p.purposeId),p.purposeId);t+=p.purposeId;let a=u.decode(e.substr(t,p.restrictionType),p.restrictionType);t+=p.restrictionType;let l=new T(c,a),d=u.decode(e.substr(t,p.numEntries),p.numEntries);t+=p.numEntries;for(let h=0;h<d;h++){let C=S.decode(e.substr(t,p.anyBoolean));t+=p.anyBoolean;let m=u.decode(e.substr(t,p.vendorId),p.vendorId);if(t+=p.vendorId,C){let P=u.decode(e.substr(t,p.vendorId),p.vendorId);if(t+=p.vendorId,P<m)throw new E(`Invalid RangeEntry: endVendorId ${P} is less than ${m}`);for(let V=m;V<=P;V++)s.add(V,l)}else s.add(m,l)}}return s.bitLength=t,s}};var B;(function(i){i[i.FIELD=0]="FIELD",i[i.RANGE=1]="RANGE"})(B||(B={}));var R=class{static encode(e){let t=[],s=[],r=u.encode(e.maxId,p.maxId),n="",c,a=p.maxId+p.encodingType,l=a+e.maxId,d=p.vendorId*2+p.singleOrRange+p.numEntries,h=a+p.numEntries;return e.forEach((C,m)=>{n+=S.encode(C),c=e.maxId>d&&h<l,c&&C&&(e.has(m+1)?s.length===0&&(s.push(m),h+=p.singleOrRange,h+=p.vendorId):(s.push(m),h+=p.vendorId,t.push(s),s=[]))}),c?(r+=String(B.RANGE),r+=this.buildRangeEncoding(t)):(r+=String(B.FIELD),r+=n),r}static decode(e,t){let s,r=0,n=u.decode(e.substr(r,p.maxId),p.maxId);r+=p.maxId;let c=u.decode(e.charAt(r),p.encodingType);if(r+=p.encodingType,c===B.RANGE){if(s=new I,t===1){if(e.substr(r,1)==="1")throw new E("Unable to decode default consent=1");r++}let a=u.decode(e.substr(r,p.numEntries),p.numEntries);r+=p.numEntries;for(let l=0;l<a;l++){let d=S.decode(e.charAt(r));r+=p.singleOrRange;let h=u.decode(e.substr(r,p.vendorId),p.vendorId);if(r+=p.vendorId,d){let C=u.decode(e.substr(r,p.vendorId),p.vendorId);r+=p.vendorId;for(let m=h;m<=C;m++)s.set(m)}else s.set(h)}}else{let a=e.substr(r,n);r+=n,s=x.decode(a,n)}return s.bitLength=r,s}static buildRangeEncoding(e){let t=e.length,s=u.encode(t,p.numEntries);return e.forEach(r=>{let n=r.length===1;s+=S.encode(!n),s+=u.encode(r[0],p.vendorId),n||(s+=u.encode(r[1],p.vendorId))}),s}};function ne(){return{[o.version]:u,[o.created]:$,[o.lastUpdated]:$,[o.cmpId]:u,[o.cmpVersion]:u,[o.consentScreen]:u,[o.consentLanguage]:W,[o.vendorListVersion]:u,[o.policyVersion]:u,[o.isServiceSpecific]:S,[o.useNonStandardStacks]:S,[o.specialFeatureOptins]:x,[o.purposeConsents]:x,[o.purposeLegitimateInterests]:x,[o.purposeOneTreatment]:S,[o.publisherCountryCode]:W,[o.vendorConsents]:R,[o.vendorLegitimateInterests]:R,[o.publisherRestrictions]:X,segmentType:u,[o.vendorsDisclosed]:R,[o.vendorsAllowed]:R,[o.publisherConsents]:x,[o.publisherLegitimateInterests]:x,[o.numCustomPurposes]:u,[o.publisherCustomConsents]:x,[o.publisherCustomLegitimateInterests]:x}}var Z=class{1={[g.CORE]:[o.version,o.created,o.lastUpdated,o.cmpId,o.cmpVersion,o.consentScreen,o.consentLanguage,o.vendorListVersion,o.purposeConsents,o.vendorConsents]};2={[g.CORE]:[o.version,o.created,o.lastUpdated,o.cmpId,o.cmpVersion,o.consentScreen,o.consentLanguage,o.vendorListVersion,o.policyVersion,o.isServiceSpecific,o.useNonStandardStacks,o.specialFeatureOptins,o.purposeConsents,o.purposeLegitimateInterests,o.purposeOneTreatment,o.publisherCountryCode,o.vendorConsents,o.vendorLegitimateInterests,o.publisherRestrictions],[g.PUBLISHER_TC]:[o.publisherConsents,o.publisherLegitimateInterests,o.numCustomPurposes,o.publisherCustomConsents,o.publisherCustomLegitimateInterests],[g.VENDORS_ALLOWED]:[o.vendorsAllowed],[g.VENDORS_DISCLOSED]:[o.vendorsDisclosed]}};var ae=class{static fieldSequence=new Z;static encode(e,t){let s;try{s=this.fieldSequence[String(e.version)][t]}catch{throw new L(`Unable to encode version: ${e.version}, segment: ${t}`)}let r="";t!==g.CORE&&(r=u.encode(Q.KEY_TO_ID[t],p.segmentType));let n=ne();return s.forEach(c=>{let a=e[c],l=n[c],d=p[c];d===void 0&&this.isPublisherCustom(c)&&(d=Number(e[o.numCustomPurposes]));try{r+=l.encode(a,d)}catch(h){throw new L(`Error encoding ${t}->${c}: ${h.message}`)}}),M.encode(r)}static decode(e,t,s){let r=M.decode(e),n=0;s===g.CORE&&(t.version=u.decode(r.substr(n,p[o.version]),p[o.version])),s!==g.CORE&&(n+=p.segmentType);let c=this.fieldSequence[String(t.version)][s],a=ne();return c.forEach(l=>{let d=a[l],h=p[l];if(h===void 0&&this.isPublisherCustom(l)&&(h=Number(t[o.numCustomPurposes])),h!==0){let C=r.substr(n,h);if(d===R?t[l]=d.decode(C,t.version):t[l]=d.decode(C,h),Number.isInteger(h))n+=h;else if(Number.isInteger(t[l].bitLength))n+=t[l].bitLength;else throw new E(l)}}),t}static isPublisherCustom(e){return e.indexOf("publisherCustom")===0}};var ee=class{static absCall(e,t,s,r){return new Promise((n,c)=>{let a=new XMLHttpRequest,l=()=>{if(a.readyState==XMLHttpRequest.DONE)if(a.status>=200&&a.status<300){let m=a.response;if(typeof m=="string")try{m=JSON.parse(m)}catch{}n(m)}else c(new Error(`HTTP Status: ${a.status} response type: ${a.responseType}`))},d=()=>{c(new Error("error"))},h=()=>{c(new Error("aborted"))},C=()=>{c(new Error("Timeout "+r+"ms "+e))};a.withCredentials=s,a.addEventListener("load",l),a.addEventListener("error",d),a.addEventListener("abort",h),t===null?a.open("GET",e,!0):a.open("POST",e,!0),a.responseType="json",a.timeout=r,a.ontimeout=C,a.send(t)})}static post(e,t,s=!1,r=0){return this.absCall(e,JSON.stringify(t),s,r)}static fetch(e,t=!1,s=0){return this.absCall(e,null,t,s)}};var N=class i extends v{static LANGUAGE_CACHE=new Map;static CACHE=new Map;static LATEST_CACHE_KEY=0;static DEFAULT_LANGUAGE="EN";static consentLanguages=new j;static baseUrl_;static set baseUrl(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new O("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&e[e.length-1]!=="/"&&(e+="/"),this.baseUrl_=e}static get baseUrl(){return this.baseUrl_}static latestFilename="vendor-list.json";static versionedFilename="archives/vendor-list-v[VERSION].json";static languageFilename="purposes-[LANG].json";readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;isReady_=!1;vendors_;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;lang_;isLatest=!1;constructor(e){super();let t=i.baseUrl;if(this.lang_=i.DEFAULT_LANGUAGE,this.isVendorList(e))this.populate(e),this.readyPromise=Promise.resolve();else{if(!t)throw new O("must specify GVL.baseUrl before loading GVL json");if(e>0){let s=e;i.CACHE.has(s)?(this.populate(i.CACHE.get(s)),this.readyPromise=Promise.resolve()):(t+=i.versionedFilename.replace("[VERSION]",String(s)),this.readyPromise=this.fetchJson(t))}else i.CACHE.has(i.LATEST_CACHE_KEY)?(this.populate(i.CACHE.get(i.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(t+i.latestFilename))}}static emptyLanguageCache(e){let t=!1;return e===void 0&&i.LANGUAGE_CACHE.size>0?(i.LANGUAGE_CACHE=new Map,t=!0):typeof e=="string"&&this.consentLanguages.has(e.toUpperCase())&&(i.LANGUAGE_CACHE.delete(e.toUpperCase()),t=!0),t}static emptyCache(e){let t=!1;return Number.isInteger(e)&&e>=0?(i.CACHE.delete(e),t=!0):e===void 0&&(i.CACHE=new Map,t=!0),t}cacheLanguage(){i.LANGUAGE_CACHE.has(this.lang_)||i.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})}async fetchJson(e){try{this.populate(await ee.fetch(e))}catch(t){throw new O(t.message)}}getJson(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))}async changeLanguage(e){let t=e.toUpperCase();if(i.consentLanguages.has(t)){if(t!==this.lang_)if(this.lang_=t,i.LANGUAGE_CACHE.has(t)){let s=i.LANGUAGE_CACHE.get(t);for(let r in s)s.hasOwnProperty(r)&&(this[r]=s[r])}else{let s=i.baseUrl+i.languageFilename.replace("[LANG]",e);try{await this.fetchJson(s),this.cacheLanguage()}catch(r){throw new O("unable to load language: "+r.message)}}}else throw new O(`unsupported language ${e}`)}get language(){return this.lang_}isVendorList(e){return e!==void 0&&e.vendors!==void 0}populate(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,typeof this.lastUpdated=="string"&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&i.CACHE.set(i.LATEST_CACHE_KEY,this.getJson()),i.CACHE.has(this.vendorListVersion)||i.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(e){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(t=>{this.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(t=>{this.bySpecialPurposeVendorMap[t]=new Set}),Object.keys(this.features).forEach(t=>{this.byFeatureVendorMap[t]=new Set}),Object.keys(this.specialFeatures).forEach(t=>{this.bySpecialFeatureVendorMap[t]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(t=>+t)),this.vendorIds=new Set(e),this.vendors_=e.reduce((t,s)=>{let r=this.vendors_[String(s)];return r&&r.deletedDate===void 0&&(r.purposes.forEach(n=>{this.byPurposeVendorMap[String(n)].consent.add(s)}),r.specialPurposes.forEach(n=>{this.bySpecialPurposeVendorMap[String(n)].add(s)}),r.legIntPurposes.forEach(n=>{this.byPurposeVendorMap[String(n)].legInt.add(s)}),r.flexiblePurposes&&r.flexiblePurposes.forEach(n=>{this.byPurposeVendorMap[String(n)].flexible.add(s)}),r.features.forEach(n=>{this.byFeatureVendorMap[String(n)].add(s)}),r.specialFeatures.forEach(n=>{this.bySpecialFeatureVendorMap[String(n)].add(s)}),t[s]=r),t},{})}getFilteredVendors(e,t,s,r){let n=e.charAt(0).toUpperCase()+e.slice(1),c,a={};return e==="purpose"&&s?c=this["by"+n+"VendorMap"][String(t)][s]:c=this["by"+(r?"Special":"")+n+"VendorMap"][String(t)],c.forEach(l=>{a[String(l)]=this.vendors[String(l)]}),a}getVendorsWithConsentPurpose(e){return this.getFilteredVendors("purpose",e,"consent")}getVendorsWithLegIntPurpose(e){return this.getFilteredVendors("purpose",e,"legInt")}getVendorsWithFlexiblePurpose(e){return this.getFilteredVendors("purpose",e,"flexible")}getVendorsWithSpecialPurpose(e){return this.getFilteredVendors("purpose",e,void 0,!0)}getVendorsWithFeature(e){return this.getFilteredVendors("feature",e)}getVendorsWithSpecialFeature(e){return this.getFilteredVendors("feature",e,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(e){this.mapVendors(e)}get isReady(){return this.isReady_}clone(){let e=new i(this.getJson());return this.lang_!==i.DEFAULT_LANGUAGE&&e.changeLanguage(this.lang_),e}static isInstanceOf(e){return typeof e=="object"&&typeof e.narrowVendorsTo=="function"}};var te=class extends v{static consentLanguages=N.consentLanguages;isServiceSpecific_=!1;supportOOB_=!0;useNonStandardStacks_=!1;purposeOneTreatment_=!1;publisherCountryCode_="AA";version_=2;consentScreen_=0;policyVersion_=2;consentLanguage_="EN";cmpId_=0;cmpVersion_=0;vendorListVersion_=0;numCustomPurposes_=0;gvl_;created;lastUpdated;specialFeatureOptins=new I;purposeConsents=new I;purposeLegitimateInterests=new I;publisherConsents=new I;publisherLegitimateInterests=new I;publisherCustomConsents=new I;publisherCustomLegitimateInterests=new I;customPurposes;vendorConsents=new I;vendorLegitimateInterests=new I;vendorsDisclosed=new I;vendorsAllowed=new I;publisherRestrictions=new H;constructor(e){super(),e&&(this.gvl=e),this.updated()}set gvl(e){N.isInstanceOf(e)||(e=new N(e)),this.gvl_=e,this.publisherRestrictions.gvl=e}get gvl(){return this.gvl_}set cmpId(e){if(e=Number(e),Number.isInteger(e)&&e>1)this.cmpId_=e;else throw new b("cmpId",e)}get cmpId(){return this.cmpId_}set cmpVersion(e){if(e=Number(e),Number.isInteger(e)&&e>-1)this.cmpVersion_=e;else throw new b("cmpVersion",e)}get cmpVersion(){return this.cmpVersion_}set consentScreen(e){if(e=Number(e),Number.isInteger(e)&&e>-1)this.consentScreen_=e;else throw new b("consentScreen",e)}get consentScreen(){return this.consentScreen_}set consentLanguage(e){this.consentLanguage_=e}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(e){if(/^([A-z]){2}$/.test(e))this.publisherCountryCode_=e.toUpperCase();else throw new b("publisherCountryCode",e)}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(e){if(e=Number(e)>>0,e<0)throw new b("vendorListVersion",e);this.vendorListVersion_=e}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new b("policyVersion",e)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(e){this.version_=parseInt(e,10)}get version(){return this.version_}set isServiceSpecific(e){this.isServiceSpecific_=e}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardStacks(e){this.useNonStandardStacks_=e}get useNonStandardStacks(){return this.useNonStandardStacks_}set supportOOB(e){this.supportOOB_=e}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(e){this.purposeOneTreatment_=e}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let e=this.numCustomPurposes_;if(typeof this.customPurposes=="object"){let t=Object.keys(this.customPurposes).sort((s,r)=>Number(s)-Number(r));e=parseInt(t.pop(),10)}return e}set numCustomPurposes(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new b("numCustomPurposes",e)}updated(){let e=new Date,t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));this.created=t,this.lastUpdated=t}};var se=class extends w{respond(){let e=f.tcModel,t=e.vendorListVersion,s;this.param===void 0&&(this.param=t),this.param===t&&e.gvl?s=e.gvl:s=new N(this.param),s.readyPromise.then(()=>{this.invokeCallback(s.getJson())})}};var re=class extends _{respond(){this.listenerId=f.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),super.respond()}};var ie=class extends w{respond(){this.invokeCallback(f.eventQueue.remove(this.param))}};var pe=class{static[A.PING]=Y;static[A.GET_TC_DATA]=_;static[A.GET_IN_APP_TC_DATA]=K;static[A.GET_VENDOR_LIST]=se;static[A.ADD_EVENT_LISTENER]=re;static[A.REMOVE_EVENT_LISTENER]=ie};var ve=be(he());ve();})();
